<!DOCTYPE html>
<html ng-app="app">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no,minimal-ui">
		<meta name="format-detection" content="telephone=no">
		<!-- 为什么要有这个呢，因为如果没有这个的话，当网页中出现了电话号码，它会高亮，而我们是阅读器，肯定不能这样 -->
		<link rel="stylesheet" href="css/reset.css">
		<link rel="stylesheet" type="text/css" href="css/tem-first.css">
		<link rel="stylesheet" type="text/css" href="css/tem.css">
	</head>
	<body>
		<div id="root" class="container">
			<div class="m-article-">
				<div class="artical-action-middle" id="action_middle">
					
				</div>
			</div>
			<div id="top_nav" class="top-nav" style="display: none;">
				<div class="icon-back"></div>
				<div class="top-nav-title">返回书架</div>
			</div>

			<!-- 侧边栏 -->
			<div id="fiction_chapter_title"></div>
			<div id="fiction_chapter_container" class="m-read-content">
				<h4>上善若水</h4>
				<p>"上善若水"是一个成语，指的是：像水的品性一样，泽被万物而不争名利。处于众人所不注意的地方或者细微的地方，所以是最接近道的。水，无色无味，在方而法方，在圆而法圆，无所滞，它以百态存于自然界，于自然无所违也。语出《老子》：“上善若水，水善利万物而不争，处众人之所恶（wù），故几于道。”在道家学说里，水为至善至柔；水性绵绵密密，微则无声，巨则汹涌；与人无争却又容纳万物。水有滋养万物的德行，它使万物得到它的利益，而不与万物发生矛盾、冲突，人生之道，莫过于此。</p>
				<p>"上善若水"是一个成语，指的是：像水的品性一样，泽被万物而不争名利。处于众人所不注意的地方或者细微的地方，所以是最接近道的。水，无色无味，在方而法方，在圆而法圆，无所滞，它以百态存于自然界，于自然无所违也。语出《老子》：“上善若水，水善利万物而不争，处众人之所恶（wù），故几于道。”在道家学说里，水为至善至柔；水性绵绵密密，微则无声，巨则汹涌；与人无争却又容纳万物。水有滋养万物的德行，它使万物得到它的利益，而不与万物发生矛盾、冲突，人生之道，莫过于此。</p>
				<p>"上善若水"是一个成语，指的是：像水的品性一样，泽被万物而不争名利。处于众人所不注意的地方或者细微的地方，所以是最接近道的。水，无色无味，在方而法方，在圆而法圆，无所滞，它以百态存于自然界，于自然无所违也。语出《老子》：“上善若水，水善利万物而不争，处众人之所恶（wù），故几于道。”在道家学说里，水为至善至柔；水性绵绵密密，微则无声，巨则汹涌；与人无争却又容纳万物。水有滋养万物的德行，它使万物得到它的利益，而不与万物发生矛盾、冲突，人生之道，莫过于此。</p>
				<p>"上善若水"是一个成语，指的是：像水的品性一样，泽被万物而不争名利。处于众人所不注意的地方或者细微的地方，所以是最接近道的。水，无色无味，在方而法方，在圆而法圆，无所滞，它以百态存于自然界，于自然无所违也。语出《老子》：“上善若水，水善利万物而不争，处众人之所恶（wù），故几于道。”在道家学说里，水为至善至柔；水性绵绵密密，微则无声，巨则汹涌；与人无争却又容纳万物。水有滋养万物的德行，它使万物得到它的利益，而不与万物发生矛盾、冲突，人生之道，莫过于此。</p>
			</div>
				
			<div class="m-button-bar">
				<ul class="u-tab">
					<li id="prev_button">上一章</li>
					<li id="next_button">下一章</li>
				</ul>
			</div>

			<div id="bottom_nav" class="bottom-nav" style="display: none;">
				<div class="bottom-item">
					<div class="icon-menu icon-bottom"></div>
					<div class="title-bottom">目录</div>
				</div>
				<div class="bottom-item" id="font_control">
					<div class="icon-font icon-bottom"></div>
					<div class="title-bottom">字体</div>
				</div>
				<div class="bottom-item" id="night_or_day">
					<div class="icon-night icon-bottom" id="icon_night"></div>
					<div class="title-bottom" id="title_night">夜间</div>
					<div class="icon-day icon-bottom" id="icon_day" style="display: none;"></div>
					<div class="title-bottom" id="title_day" style="display: none;">白天</div>
<!-- 						<div class="icon-night icon-bottom" id="icon_night" style="display: none;"></div>
						<div class="title-bottom" id="title_night" style="display: none;">夜间</div>
						<div class="icon-day icon-bottom" id="icon_day" ></div>
						<div class="title-bottom" id="title_day" >白天</div> -->
				</div>		
			</div>

			<div class="bottom-pannel-bk font-container"  style="display: none;"></div>
			<div class="bottom-pannel font-container" id="font-container" style="display: none;">
				<div class="font-child-mod">
					<span>字号</span>
					<button id="large_font" class="font-size-button button-left">大</button>
					<button id="small_font" class="font-size-button">小</button>
				</div>
				<div class="font-child-mod">
					<span>背景</span>
					<ul class="bgcolor-button">
						<li class="bgcolor-item bg-1"></li>
						<li class="bgcolor-item bg-2"></li>
						<li class="bgcolor-item bg-3"></li>
						<li class="bgcolor-item bg-4"></li>
						<li class="bgcolor-item bg-5"></li>
						<li class="bgcolor-item bg-6"></li>
					</ul>
				</div>
			</div>

		</div>

		<!-- 网页结构 -->
		<script src="lib/zepto.min.js"></script>
		<script>
			window.jQuery = $;
			// 这句话的意思是将window中默认jQuery指向为zepto的$
			// zepto和jquery几乎一样，不过zepto更加小巧
			// 这么做是为了保证后面两个插件能够正常地使用
		</script>
		<script src="js/jquery.base64.js"></script>
		<script src="js/jquery.jsonp.js"></script>

		<script>
			(function(){
				// util事件框架
				var Util=(function(){
					var prefix='html5_reader_';
					var StorageGetter=function(key){
						return localStorage.getItem(prefix+key);
					};
					var StorageSetter=function(key,value){
						return localStorage.setItem(prefix+key,value);
					};

					return {
						StorageGetter:StorageGetter,
						StorageSetter:StorageSetter
					};
				})();

				var DOM={
					top_nav:$('#top_nav'),
					bottom_nav:$('#bottom_nav'),
					font_container:$('.font-container'),
					font_control:$('#font_control')
				};
				var Win=$(window);
				var Doc=$(document);
				var rootContainer=$('#root');
				var fictionContainer=$('#fiction_chapter_container');

				var initFontSize=Util.StorageGetter('font_size');
				if(initFontSize==null){
					initFontSize=14;
				}else{
					initFontSize=parseInt(initFontSize);
				}
				console.log(initFontSize);




				fictionContainer.css('font-size',initFontSize);



				// 这样设置了之后就不用重新去取变量了
				function main(){
					// 整个项目的入口函数
					EventHandler();
				}

				function ReaderModel(){
					// 实现和阅读器相关的数据交互的方法
				}

				function ReaderBaseFrame(){
					// 渲染基本的UI结构
				}

				function EventHandler(){
					// 交互的事件绑定
					// touch
					// zepto模拟用户点击叫做tap
					// 安卓4.0之前用click有300ms延迟
					// 新版之后就没有了
					$('#action_middle').click(function(){
						if(DOM.top_nav.css('display')=='none'){
							DOM.bottom_nav.show();
							DOM.top_nav.show();
						}else{
							DOM.bottom_nav.hide();
							DOM.top_nav.hide();

							DOM.font_control.removeClass("current");
							DOM.font_container.hide();
						}
					});

					Win.scroll(function(){
						DOM.bottom_nav.hide();
						DOM.top_nav.hide();
						DOM.font_container.hide();
					});

					$('#night_or_day').click(function(){
						// todo 触发背景黑白切换事件
					});

					DOM.font_control.click(function(){
						if(DOM.font_container.css('display')=='none'){
							DOM.font_container.show();
							DOM.font_control.addClass("current");
						}else{
							DOM.font_container.hide();
							DOM.font_control.removeClass("current");
						}
					});

					$('#large_font').click(function(){
						if(initFontSize>20){
							return ;
						}
						initFontSize+=1;
						fictionContainer.css('font-size',initFontSize);
						Util.StorageSetter('font_size',initFontSize);
					
					});

					$('#small_font').click(function(){
						if(initFontSize<12){
							return ;
						}
						initFontSize-=1;
						fictionContainer.css('font-size',initFontSize);
						Util.StorageSetter('font_size',initFontSize);
					});


				}

				main();

				DOM.bottom_nav.show();
				DOM.top_nav.show();

			})();
		</script>
	</body>
</html>